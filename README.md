# Краткое содержание "Чистый код: создание, анализ и рефакторинг", Роберт Мартин

## Описание

Это мой конспект
книги ["Чистый код: создание, анализ и рефакторинг", Роберт Мартин](https://www.piter.com/collection/all/product/chistyy-kod-sozdanie-analiz-i-refaktoring-biblioteka-programmista-45ccca) (
сайт российского издательства).

Если Вы автор и считаете, что данный конспект нарушает авторские права - прошу сообщить, я сделаю этот репозиторий
приватным.

Нашли опечатку/неточность? Пишите - разберемся.

[Связаться со мной](https://t.me/szachesov)

# 1. Содержание

- [1. Содержание](#1-содержание)
- [2. Содержательные имена](#2-содержательные-имена)
    - [2.1 Имена должны передавать намерения программиста](#21-имена-должны-передавать-намерения-программиста)
    - [2.2 Избегайте дезинформации](#22-избегайте-дезинформации)
    - [2.3 Используйте осмысленные различия](#23-используйте-осмысленные-различия)
    - [2.4 Используйте удобопроизносимые имена](#24-используйте-удобопроизносимые-имена)
    - [2.5 Выбирайте имена, удобные для поиска](#25-выбирайте-имена-удобные-для-поиска)
    - [2.6 Избегайте схем кодирования имен](#26-избегайте-схем-кодирования-имен)
        - [2.6.1 Венгерская запись](#261-венгерская-запись)
        - [2.6.2 Префиксы членов классов](#262-префиксы-членов-классов)
        - [2.6.3 Интерфейсы и реализации](#263-интерфейсы-и-реализации)
    - [2.7 Избегайте мысленных преобразований](#27-избегайте-мысленных-преобразований)
    - [2.8 Имена классов](#28-имена-классов)
    - [2.9 Имена методов](#29-имена-методов)
    - [2.10 Избегайте остроумия](#210-избегайте-остроумия)
    - [2.11 Выберите одно слово для каждой концепции](#211-выберите-одно-слово-для-каждой-концепции)
    - [2.12 Воздержитесь от каламбуров](#212-воздержитесь-от-каламбуров)
    - [2.13 Используйте имена из пространства решения](#213-используйте-имена-из-пространства-решения)
    - [2.14 Используйте имена из пространства задач](#214-используйте-имена-из-пространства-задач)
    - [2.15 Добавьте содержательный контекст](#215-добавьте-содержательный-контекст)
    - [2.16 Не добавляйте избыточный контекст](#216-не-добавляйте-избыточный-контекст)
- [3. Функции](#3-функции)
    - [3.1 Компактность!](#31-компактность)

# 2. Содержательные имена

## 2.1 Имена должны передавать намерения программиста

Следите за именами и изменяйте их, если найдете более удачные варианты.

Имя переменной, функции или класса должно сообщить, почему существует эта сущность, что она делает и как используется.
Если имя требует комментарии - оно не передает намерения программиста.

Не выразительные имена:

```java
public class Minesweeper {
    public List<int[]> getThem() {
        List<int[]> list1 = new ArrayList<>();
        for (int[] x : theList) {
            if (x[0] == 4) {
                list1.add(x);
            }
        }
        return list1;
    }
}

```

Добавление имен, на примере игры "Сапер":

```java
public class Minesweeper {
    public List<int[]> getFlaggedCells() {
        List<int[]> flaggedCells = new ArrayList<>();
        for (int[] cell : gameBoard) {
            if (x[STATUS_VALUE] == FLAGGED) {
                flaggedCells.add(cell);
            }
        }
        return flaggedCells;
    }
}

```

Добавление класса, для описания ячеек:

```java
public class Minesweeper {
    public List<Cell> getFlaggedCells() {
        List<Cell> flaggedCells = new ArrayList<>();
        for (Cell cell : gameBoard) {
            if (cell.isFlagged()) {
                flaggedCells.add(cell);
            }
        }
        return flaggedCells;
    }
}

```

## 2.2 Избегайте дезинформации

Нужно избегать ложных ассоциаций, затемняющий смысл кода. Не используйте слова со скрытыми значениями, отличными от
предполагаемого.

Обозначение группы ученых. Плохо: `accountList`, если только действительно не используется `List`.
Лучше: `accountGroup`, `bunchOfAccounts`, `accounts`.

Остерегайтесь малозаметных различий в именах: `XYZControllerForEfficientHandlingOfStrings`
и `XYZControllerForEfficientStorageOfStrings`.

Избегайте использование строчно `L` и прописной `O` в названиях переменной, поскольку они почти не отличаются от `1`
и `0` соответственно.

## 2.3 Используйте осмысленные различия

"Числовые ряды" (a1, a2 ... aN) такие имена не дезинформируют, но не несут никакой информации.

Не информативные слова в названиях:

* слова для создания бессодержательных различий: классы `ProductInfo` или `ProductData`
* слово `variable` для имен переменных, `table` в именах таблиц и тп
* название типа `nameString`, для переменной которая будет навряд ле будет не строковым значением
* дополнительное слово `Object` в названии класса

## 2.4 Используйте удобопроизносимые имена

Например, не надо называть переменные не общеизвестной аббревиатурой или сокращать: `genymdhms` (дата генерирования,
год, месяц, день, час, минуты и секунды) или `modymdhms` (дата модификации, год, месяц, день, час, минуты и секунды),
лучше `generationTimestamp` и `modificationTimestamp` соответственно.

## 2.5 Выбирайте имена, удобные для поиска

Трудно искать в большом объеме текса однобуквенные переменные и числовые константы.

Буква `e` - самая распространенная буква английского алфавита, не стоит присваивать её имени переменной. Трудно будет
найти в тексте.

Однобуквенные переменные могут использоваться ТОЛЬКО для локальных переменных. Длина имени должна соответствовать
размеру его области видимости.

## 2.6 Избегайте схем кодирования имен

У программистов и так хватает хлопот с кодированием.

## 2.6.1 Венгерская запись

Было распространено в старых языках программирования, когда были ограничения на длину имени или невозможность объявить
тип переменной. Современные языки существует развитая система типов, а компиляторы запоминают их и обеспечивают их
соблюдение.

## 2.6.2 Префиксы членов классов

Классы и функции должны быть достаточно компактными, чтобы могли обходиться без префиксов.

## 2.6.3 Интерфейсы и реализации

Если есть выбор добавления кодирования в интерфейсы или классы, чтобы имена не дублировались,
например, `interface IShapeFactory` или `class ShapeFactoryImpl`. Лучше выбрать класс, чтобы не сообщать пользователю,
что имеют дело с интерфейсов, в том числе из-за полиморфного использования типов переменных.

## 2.7 Избегайте мысленных преобразований

Не заставляйте читателя мысленно преобразовывать ваши имена в другие. Как правило, такие проблемы происходят с именами
переменной однобуквенными или сокращенными, особенно если используется не в ограниченной области видимости.

## 2.8 Имена классов

* Должны быть существительные и их комбинации: `WikiPage`, `AddressParser`
* Стараться не использовать такие слова в именах `Manager`, `Processor`, `Data` или `Info`
* Имена не должны быть глаголом

## 2.9 Имена методов

* Должны быть глаголы или глагольные словосочетания: `postPayment`, `deletePage`, `save` и т.д.
* Методы чтения/записи и предикаты образуются из значений и префиксов: `get`, `set`, `is` согласно `javabean`
* При перезагрузке конструкторов предпочесть статистические методы-фабрики с именами, описывающие
  аргументы: `Complex fulcrumPoint = Complex.fromRealNumber(23.0)`, лучше `Complex fulcrumPoint = new Complex(23.0)`

## 2.10 Избегайте остроумия

Отдавайте предпочтение ясности перед развлекательной ценностью, а также формы просторечия или сленга.

## 2.11 Выберите одно слово для каждой концепции

Выберите одно слово для представления одной абстрактной концепции и придерживайтесь его. Существование в разных классах
эквивалентных методов с именами `fetch`, `retrieve` и `get` создаст путаницу.
Использование терминов `controller`, `manager` и `driver` в одной кодовой базе может вызвать путаницу.

## 2.12 Воздержитесь от каламбуров

Старайтесь не использовать одно слово в двух смыслах. Обозначение двух разных идей одним терминов - каламбур.
Например, существуют классы с именем метода `add`, который создает объект-значение с помощью сложение. То не следует в
другой класс называть метод `add` который добавляет объект в коллекцию, поскольку он имеет другую семантику, лучше
назвать его `insert` или `append`.

## 2.13 Используйте имена из пространства решения

Код читают программиста, поэтому можно использовать термины из области информатики, названия алгоритмов и паттернов,
математические термины и тп. Например, `JobQueue` - "очередь задач". Не ограничивайте именами только из пространства
конкретной задачи.

## 2.14 Используйте имена из пространства задач

Если нет подходящего имени из пространства решения, можно использовать имя из пространства конкретной задачи.

## 2.15 Добавьте содержательный контекст

Мало имен, которые содержательны сами по себе. Все остальные следует помещать в контекст для читателя кода, заключая их
в классы, функции и пространства имен. В крайнем случае контекст имени можно уточнить при помощи
префикса: `firstName`, `lastName`.

Имя функции определяет только часть контекста, остальное определяет сам алгоритм:

```java
public class Main {
    private void printGuessStatistics(char candidate, int count) {
        String number;
        String verb;
        String pluralModifier;

        if (count == 0) {
            number = "no";
            verb = "are";
            pluralModifier = "s";
        } else if (count == 1) {
            number = "1";
            verb = "is";
            pluralModifier = "";
        } else {
            number = Integer.toString(count);
            verb = "are";
            pluralModifier = "s";
        }

        String guessMessage =
                String.format("There %s %s %s%s", verb, number, candidate, pluralModifier);
        print(guessMessage);
    }
}

```

Функция выше длинная, переменные используются на все её протяжении.

Чтобы сократить функцию, можно вынести логику функции в класс, предоставляя очевидный контекст для переменных, а также
улучшить четкость алгоритма за счет деления на меньшие функции:

```java
public class GuessStatisticsMessage {
    private String number;
    private String verb;
    private String pluralModifier;

    public String make(char candidate, int count) {
        createPluralDependentMessageParts(count);
        return String.format("There %s %s %s%s", verb, number, candidate, pluralModifier);
    }

    private void createPluralDependentMessageParts(int count) {
        if (count == 0) {
            thereAreNoLetters();
        } else if (count == 1) {
            thereIsOneLetter();
        } else {
            thereAreManyLetters(count);
        }
    }

    private void thereAreNoLetters(int count) {
        number = Integer.toString(count);
        verb = "are";
        pluralModifier = "s";
    }

    private void thereIsOneLetter() {
        number = "1";
        verb = "is";
        pluralModifier = "";
    }

    private void thereAreNoLetters() {
        number = "no";
        verb = "are";
        pluralModifier = "s";
    }
}

```

## 2.16 Не добавляйте избыточный контекст

Если название приложение, например "Gas Station Deluxe", то не надо добавлять к имени каждого класса `GSD`.

Короткие имена обычно лучше длинных, если только их смысл понятен читателю кода. Не включайте в имя больше контекст, чем
необходимо.

Имена `accountAddress` и `customerAddress` хорошо подходят для экземпляров класса `Address`, но не для имен классов.
Если потребуется подчеркнуть, например, различия между MAC-адресами, адресами портов и веб-адресами, можно классы
назвать именами `PostalAddress`, `Mac`, `Url`.

# 3. Функции

# 3.1 Компактность!